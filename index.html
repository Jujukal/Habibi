<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Habibi üíò</title>

<style>
  :root{
    --bg1:#ff9a9e;
    --bg2:#fad0c4;
    --red:#ff3b30;
    --text:#111;
    --muted:#6b7280;
  }
  *{ box-sizing:border-box; }

  /* üå∏ Animation douce du background */
  @keyframes bgBreath{
    0%{ transform: scale(1); }
    50%{ transform: scale(1.04); }
    100%{ transform: scale(1); }
  }

  body{
    margin:0;
    height:100vh;
    overflow:hidden;
    display:flex;
    align-items:center;
    justify-content:center;
    color:var(--text);
    font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display","Helvetica Neue",Helvetica,Arial,sans-serif;
    background:
      radial-gradient(1200px 800px at 20% 20%, rgba(255,255,255,.45), rgba(255,255,255,0) 55%),
      linear-gradient(135deg, var(--bg1), var(--bg2));
    animation: bgBreath 10s ease-in-out infinite;
  }

  #hearts-bg{
    position:fixed;
    inset:0;
    pointer-events:none;
    z-index:0;
  }

  /* ‚ú® Animation apparition carte */
  @keyframes cardIntro{
    0%{
      opacity:0;
      transform: translateY(40px) scale(.92);
      filter: blur(8px);
    }
    60%{
      opacity:1;
      transform: translateY(-6px) scale(1.02);
      filter: blur(0);
    }
    100%{
      transform: translateY(0) scale(1);
    }
  }

  /* ‚ú® Floating subtil continu */
  @keyframes floatSoft{
    0%{ transform: translateY(0); }
    50%{ transform: translateY(-6px); }
    100%{ transform: translateY(0); }
  }

  .wrap{
    position:relative;
    z-index:1;
    width:min(560px, calc(100vw - 32px));
    animation: cardIntro .9s cubic-bezier(.2,.9,.2,1) both;
  }

  .card{
    width:100%;
    padding:32px 28px;
    border-radius:28px;
    background: rgba(255,255,255,.72);
    backdrop-filter: blur(18px);
    border:1px solid rgba(255,255,255,.55);
    box-shadow:0 24px 60px rgba(0,0,0,.18);
    text-align:center;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    gap:18px;
    min-height:320px;
    position:relative;
    overflow:hidden;
    animation: floatSoft 6s ease-in-out infinite;
  }

  h1{
    margin:0;
    font-size: clamp(22px,3.2vw,30px);
    letter-spacing:-0.02em;
  }

  .subtitle{
    margin:0;
    color: var(--muted);
    font-size:14px;
  }

  .btnrow{
    display:flex;
    gap:12px;
    margin-top:6px;
  }

  /* ‚ú® Boutons qui apparaissent en cascade */
  @keyframes btnIntro{
    0%{
      opacity:0;
      transform: translateY(20px) scale(.9);
    }
    100%{
      opacity:1;
      transform: translateY(0) scale(1);
    }
  }

  button{
    border:0;
    border-radius:999px;
    padding:12px 18px;
    font-size:16px;
    cursor:pointer;
    box-shadow:0 10px 24px rgba(0,0,0,.10);
    animation: btnIntro .6s ease both;
  }

  #yes{
    background: linear-gradient(180deg,#ff5a52,var(--red));
    color:white;
    animation-delay:.35s;
  }

  #no{
    background: rgba(17,17,17,.06);
    border:1px solid rgba(0,0,0,.08);
    animation-delay:.55s;
  }

  @keyframes bounce{
    0%{transform:scale(1);}
    30%{transform:scale(1.12);}
    60%{transform:scale(.96);}
    100%{transform:scale(1);}
  }
  .bounce{animation:bounce 220ms ease-out;}

  .hidden{display:none;}
</style>
</head>

<body>
<div class="wrap">
  <div class="card" id="card">
    <h1>üíå Veux-tu √™tre ma Habibi ? üíå</h1>
    <p class="subtitle">Essaie d‚Äôapprocher le ‚ÄúNon‚Äù üòà</p>

    <div class="btnrow">
      <button id="yes">Oui üíñ</button>
      <button id="no">Non üôÉ</button>
    </div>
  </div>

  <div class="card hidden" id="result">
    <h1>J'en √©tais s√ªr ! ü•∞</h1>
    <p class="subtitle">
      RDV le <strong>14 f√©vrier √† 20h</strong><br>
      üìç Surprise ‚ú®
    </p>
  </div>
</div>

<script>
const yesBtn = document.getElementById("yes");
const noBtn  = document.getElementById("no");
const card   = document.getElementById("card");
const result = document.getElementById("result");

const pointer={x:innerWidth/2,y:innerHeight/2,active:false};

function pointerXY(e){
  if(e.touches&&e.touches[0]) return {x:e.touches[0].clientX,y:e.touches[0].clientY};
  return {x:e.clientX,y:e.clientY};
}

window.addEventListener("mousemove",(e)=>{
  const {x,y}=pointerXY(e);
  pointer.x=x;pointer.y=y;pointer.active=true;
},{passive:true});

window.addEventListener("touchmove",(e)=>{
  const {x,y}=pointerXY(e);
  pointer.x=x;pointer.y=y;pointer.active=true;
},{passive:false});

let noDetached=false;

function clamp(v,min,max){return Math.max(min,Math.min(max,v));}

function bounceNo(){
  noBtn.classList.remove("bounce");
  void noBtn.offsetWidth;
  noBtn.classList.add("bounce");
}

function getCardBounds(){
  const c=card.getBoundingClientRect();
  const b=noBtn.getBoundingClientRect();
  const pad=16;
  return{
    minX:pad,
    minY:pad,
    maxX:c.width-b.width-pad,
    maxY:c.height-b.height-pad,
    cardRect:c
  };
}

function detachNoIfNeeded(){
  if(noDetached) return;
  const btn=noBtn.getBoundingClientRect();
  const c=card.getBoundingClientRect();

  card.appendChild(noBtn);

  noBtn.style.position="absolute";
  noBtn.style.left=(btn.left-c.left)+"px";
  noBtn.style.top =(btn.top -c.top )+"px";
  noDetached=true;
}

function moveNoAwayFrom(px,py){
  const {minX,minY,maxX,maxY,cardRect}=getCardBounds();
  const r=noBtn.getBoundingClientRect();

  const cx=r.left+r.width/2;
  const cy=r.top +r.height/2;

  let dx=cx-px;
  let dy=cy-py;

  const len=Math.hypot(dx,dy)||1;
  dx/=len;dy/=len;

  const leftInCard=r.left-cardRect.left;
  const topInCard =r.top -cardRect.top;

  const step=170;

  let tx=leftInCard+dx*step;
  let ty=topInCard +dy*step;

  tx=clamp(tx,minX,maxX);
  ty=clamp(ty,minY,maxY);

  noBtn.style.left=tx+"px";
  noBtn.style.top =ty+"px";

  bounceNo();
}

function loop(){
  const r=noBtn.getBoundingClientRect();
  const cx=r.left+r.width/2;
  const cy=r.top +r.height/2;
  const dist=Math.hypot(pointer.x-cx,pointer.y-cy);

  const fleeRadius=260; // p√©rim√®tre large

  if(pointer.active&&dist<fleeRadius){
    detachNoIfNeeded();
    moveNoAwayFrom(pointer.x,pointer.y);
  }

  requestAnimationFrame(loop);
}
requestAnimationFrame(loop);

noBtn.addEventListener("mousedown",(e)=>{
  e.preventDefault();
  detachNoIfNeeded();
  moveNoAwayFrom(pointer.x,pointer.y);
});

yesBtn.addEventListener("click",()=>{
  card.classList.add("hidden");
  result.classList.remove("hidden");
});
</script>
</body>
</html>



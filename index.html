<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Habibi üíò</title>

<style>
  :root{
    --bg1:#ff9a9e;
    --bg2:#fad0c4;
    --red:#ff3b30;
    --text:#111;
    --muted:#6b7280;
  }
  *{ box-sizing:border-box; }

  body{
    margin:0;
    height:100vh;
    overflow:hidden;
    display:flex;
    align-items:center;
    justify-content:center;
    color:var(--text);
    font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display","SF Pro Text","Helvetica Neue",Helvetica,Arial,sans-serif;
    background:
      radial-gradient(1200px 800px at 20% 20%, rgba(255,255,255,.45), rgba(255,255,255,0) 55%),
      linear-gradient(135deg, var(--bg1), var(--bg2));
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    touch-action: none;
  }

  /* üíñ Coeurs en arri√®re-plan */
  #hearts-bg{
    position:fixed;
    inset:0;
    pointer-events:none;
    z-index:0;
  }
  .bg-heart{
    position:absolute;
    left:var(--x);
    top:-10vh;
    font-size: var(--s);
    opacity: var(--o);
    filter: blur(var(--b));
    transform: translateY(0) rotate(var(--r));
    animation: fall var(--d) linear infinite;
  }
  @keyframes fall{
    0%   { transform: translateY(-10vh) rotate(var(--r)); }
    100% { transform: translateY(120vh) rotate(calc(var(--r) + 40deg)); }
  }

  /* ‚ú® Apparition douce */
  .wrap{
    position:relative;
    z-index:1;
    width:min(560px, calc(100vw - 32px));
    animation: popIn 700ms cubic-bezier(.2,.9,.2,1) both;
  }
  @keyframes popIn{
    from{ opacity:0; transform: translateY(12px) scale(.98); }
    to  { opacity:1; transform: translateY(0) scale(1); }
  }

  /* üì± Glass premium */
  .card{
    width:100%;
    padding: 32px 28px;
    border-radius: 28px;
    background: rgba(255,255,255,.72);
    backdrop-filter: blur(18px);
    -webkit-backdrop-filter: blur(18px);
    border: 1px solid rgba(255,255,255,.55);
    box-shadow:
      0 24px 60px rgba(0,0,0,.18),
      0 1px 0 rgba(255,255,255,.6) inset;
    text-align:center;

    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    gap: 18px;
    min-height: 320px;

    position: relative;          /* ‚úÖ pour que ‚ÄúNon‚Äù puisse bouger DANS la carte */
    overflow: hidden;            /* ‚úÖ emp√™che ‚ÄúNon‚Äù de sortir visuellement */
  }

  h1{
    margin:0;
    font-size: clamp(22px, 3.2vw, 30px);
    letter-spacing: -0.02em;
    line-height:1.1;
    color:#1b1b1f;
    white-space: nowrap;
  }
  .subtitle{
    margin:0;
    color: var(--muted);
    font-size: 14px;
  }

  .btnrow{
    display:flex;
    gap:12px;
    align-items:center;
    justify-content:center;
    flex-wrap:wrap;
    margin-top: 6px;
    position: relative;
  }

  button{
    border:0;
    border-radius: 999px;
    padding: 12px 18px;
    font-size: 16px;
    cursor:pointer;
    transition: transform .15s ease, box-shadow .2s ease, background .2s ease;
    box-shadow: 0 10px 24px rgba(0,0,0,.10);
    user-select:none;
    -webkit-tap-highlight-color: transparent;
    will-change: transform, left, top;
  }

  #yes{
    background: linear-gradient(180deg, #ff5a52, var(--red));
    color:white;
  }

  #no{
    background: rgba(17,17,17,.06);
    color:#111;
    box-shadow: none;
    border: 1px solid rgba(0,0,0,.08);
  }

  /* ‚úÖ Bounce */
  @keyframes bounce {
    0%   { transform: scale(1); }
    30%  { transform: scale(1.12); }
    60%  { transform: scale(0.96); }
    100% { transform: scale(1); }
  }
  .bounce { animation: bounce 220ms ease-out; }

  .hidden{ display:none; }

  /* ‚ù§Ô∏è burst */
  .burst-heart{
    position:fixed;
    bottom:-40px;
    left:var(--x);
    font-size: var(--s);
    opacity: .95;
    animation: rise 3.5s ease-out forwards;
    pointer-events:none;
    z-index:2;
    filter: drop-shadow(0 8px 18px rgba(0,0,0,.12));
  }
  @keyframes rise{
    0%   { transform: translateY(0) scale(1); opacity:.95; }
    100% { transform: translateY(-110vh) scale(1.5); opacity:0; }
  }

  /* ‚ú® trail hearts */
  .trail-heart{
    position:fixed;
    transform: translate(-50%, -50%) scale(1);
    pointer-events:none;
    z-index:2;
    animation: trail 900ms ease-out forwards;
    filter: drop-shadow(0 10px 18px rgba(0,0,0,.10));
  }
  @keyframes trail{
    0%   { transform: translate(-50%, -50%) scale(1); opacity:.85; }
    100% { transform: translate(-50%, calc(-50% - 40px)) scale(1.35); opacity:0; }
  }

  @media (max-width: 420px){
    h1{ white-space: normal; }
    .card{ padding: 26px 18px; min-height: 300px; }
  }
</style>
</head>

<body>
  <div id="hearts-bg" aria-hidden="true"></div>

  <div class="wrap">
    <div class="card" id="card">
      <h1>üíå Veux-tu √™tre ma Habibi ? üíå</h1>
      <p class="subtitle">Essaie d‚Äôapprocher le ‚ÄúNon‚Äù üòà</p>

      <div class="btnrow" id="btnrow">
        <button id="yes">Oui üíñ</button>
        <button id="no">Non üôÉ</button>
      </div>
    </div>

    <div class="card hidden" id="result">
      <h1>J'en √©tais s√ªr ! ü•∞</h1>
      <p class="subtitle">
        RDV le <strong>14 f√©vrier √† 20h</strong><br>
        üìç Surprise ‚ú®
      </p>
    </div>
  </div>

<script>
  const heartsBg = document.getElementById("hearts-bg");
  const yesBtn   = document.getElementById("yes");
  const noBtn    = document.getElementById("no");
  const card     = document.getElementById("card");
  const result   = document.getElementById("result");

  /* ----------------------------
     üíñ Background hearts
  ---------------------------- */
  function spawnBgHeart(){
    const el = document.createElement("div");
    el.className = "bg-heart";
    el.textContent = "‚ù§Ô∏è";
    el.style.setProperty("--x", (Math.random()*100) + "vw");
    el.style.setProperty("--s", (10 + Math.random()*22) + "px");
    el.style.setProperty("--o", (0.06 + Math.random()*0.12));
    el.style.setProperty("--b", (Math.random() < 0.35 ? (0.5 + Math.random()*1.8) : 0) + "px");
    el.style.setProperty("--d", (10 + Math.random()*14) + "s");
    el.style.setProperty("--r", (-20 + Math.random()*40) + "deg");
    heartsBg.appendChild(el);
    const duration = 10 + Math.random()*14;
    setTimeout(() => el.remove(), duration*1000 + 2000);
  }
  for(let i=0;i<18;i++) setTimeout(spawnBgHeart, i * 350);
  setInterval(spawnBgHeart, 650);

  /* ----------------------------
     ‚ú® trail hearts (throttled)
  ---------------------------- */
  let lastTrail = 0;
  function spawnTrailHeart(x, y){
    const now = performance.now();
    if (now - lastTrail < 55) return;
    lastTrail = now;

    const h = document.createElement("div");
    h.className = "trail-heart";
    h.textContent = "‚ù§Ô∏è";
    h.style.left = x + "px";
    h.style.top  = y + "px";
    h.style.fontSize = (12 + Math.random()*12) + "px";
    h.style.opacity  = (0.35 + Math.random()*0.45);

    document.body.appendChild(h);
    setTimeout(() => h.remove(), 950);
  }

  const pointer = { x: innerWidth/2, y: innerHeight/2, active:false };
  function pointerXY(e){
    if (e.touches && e.touches[0]) return {x: e.touches[0].clientX, y: e.touches[0].clientY};
    return {x: e.clientX, y: e.clientY};
  }

  window.addEventListener("mousemove", (e) => {
    const {x,y} = pointerXY(e);
    pointer.x=x; pointer.y=y; pointer.active=true;
    spawnTrailHeart(x,y);
  }, {passive:true});

  window.addEventListener("touchstart", (e) => {
    const {x,y} = pointerXY(e);
    pointer.x=x; pointer.y=y; pointer.active=true;
    spawnTrailHeart(x,y);
  }, {passive:false});

  window.addEventListener("touchmove", (e) => {
    const {x,y} = pointerXY(e);
    pointer.x=x; pointer.y=y; pointer.active=true;
    spawnTrailHeart(x,y);
  }, {passive:false});

  window.addEventListener("mouseleave", () => pointer.active=false);

  /* ----------------------------
     üíò Oui grossit progressivement
  ---------------------------- */
  let yesScale = 1.0;
  const YES_MAX = 1.45;
  const YES_GROW_PER_SEC = 0.06;

  /* ----------------------------
     üôÉ Non : reste DANS la carte
  ---------------------------- */
  let noDetached = false;

  function clamp(v,min,max){ return Math.max(min, Math.min(max, v)); }

  function bounceNo(){
    noBtn.classList.remove("bounce");
    void noBtn.offsetWidth;
    noBtn.classList.add("bounce");
  }

  function getCardBoundsForNo(btnRect){
    const c = card.getBoundingClientRect();
    const pad = 16; // marge int√©rieure pour √©viter les bords
    const minX = pad;
    const minY = pad;
    const maxX = c.width  - btnRect.width  - pad;
    const maxY = c.height - btnRect.height - pad;
    return {minX, minY, maxX, maxY, cardRect:c};
  }

  function detachNoIfNeeded(){
    if (noDetached) return;

    // position du bouton en coordonn√©es carte
    const btn = noBtn.getBoundingClientRect();
    const c   = card.getBoundingClientRect();

    const leftInCard = btn.left - c.left;
    const topInCard  = btn.top  - c.top;

    noBtn.style.position = "absolute";
    noBtn.style.left = leftInCard + "px";
    noBtn.style.top  = topInCard  + "px";
    noBtn.style.zIndex = "10";

    noDetached = true;
  }

  function keepNoInsideCard(){
    if (!noDetached) return;
    const rect = noBtn.getBoundingClientRect();
    const {minX, minY, maxX, maxY, cardRect} = getCardBoundsForNo(rect);

    // rect en coordonn√©es carte
    const leftInCard = rect.left - cardRect.left;
    const topInCard  = rect.top  - cardRect.top;

    const x = clamp(leftInCard, minX, maxX);
    const y = clamp(topInCard,  minY, maxY);

    noBtn.style.left = x + "px";
    noBtn.style.top  = y + "px";
  }

  function moveNoAwayFrom(pointerClientX, pointerClientY){
    const rect = noBtn.getBoundingClientRect();
    const {minX, minY, maxX, maxY, cardRect} = getCardBoundsForNo(rect);

    // centre du bouton en coords viewport
    const cx = rect.left + rect.width/2;
    const cy = rect.top  + rect.height/2;

    // vecteur fuite (viewport)
    let dx = cx - pointerClientX;
    let dy = cy - pointerClientY;

    if (Math.abs(dx) < 0.001 && Math.abs(dy) < 0.001){
      dx = (Math.random() - 0.5);
      dy = (Math.random() - 0.5);
    }

    const len = Math.hypot(dx, dy) || 1;
    dx /= len; dy /= len;

    // position actuelle du bouton en coords carte
    const leftInCard = rect.left - cardRect.left;
    const topInCard  = rect.top  - cardRect.top;

    // d√©placement (dans la carte)
    const step = 150;
    let tx = leftInCard + dx * step;
    let ty = topInCard  + dy * step;

    tx = clamp(tx, minX, maxX);
    ty = clamp(ty, minY, maxY);

    noBtn.style.left = tx + "px";
    noBtn.style.top  = ty + "px";

    bounceNo();
  }

  /* ----------------------------
     Loop : agrandit Oui + fuite
  ---------------------------- */
  let lastT = performance.now();
  function loop(t){
    const dt = Math.min(0.05, (t - lastT)/1000);
    lastT = t;

    yesScale = Math.min(YES_MAX,_

